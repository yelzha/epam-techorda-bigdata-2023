resources:
  jobs:
    001_seed_distributor_online_store:
      name: 001_seed_distributor_online_store
      description: Main workflow of the project that contains bronze and silver layers.
      email_notifications:
        on_failure:
          - zhastay_yeltay@epam.com
      schedule:
        quartz_cron_expression: 54 0 0 * * ?
        timezone_id: UTC
        pause_status: PAUSED
      tasks:
        - task_key: bronze_addresses
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_addresses
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
          max_retries: 1
          min_retry_interval_millis: 900000
        - task_key: bronze_customers
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_customers
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
          max_retries: 1
          min_retry_interval_millis: 900000
        - task_key: bronze_items
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_items
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
          max_retries: 1
          min_retry_interval_millis: 900000
        - task_key: bronze_order_details
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_order_details
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
          max_retries: 1
          min_retry_interval_millis: 900000
        - task_key: bronze_orders
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_orders
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
          max_retries: 1
          min_retry_interval_millis: 900000
        - task_key: bronze_states_extra_data
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/1_bronze/bronze_states_extra_data
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_addresses_partly
          depends_on:
            - task_key: bronze_addresses
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_addresses
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_address_dlq
          depends_on:
            - task_key: silver_addresses_partly
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_addresses_dlq
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_addresslines_enrich
          depends_on:
            - task_key: silver_address_dlq
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_addresslines_enrich
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_customers
          depends_on:
            - task_key: bronze_customers
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_customers
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_items
          depends_on:
            - task_key: bronze_items
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_items
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_order_details
          depends_on:
            - task_key: bronze_order_details
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_order_details
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_orders
          depends_on:
            - task_key: bronze_orders
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_orders
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: silver_states_extra_data
          depends_on:
            - task_key: bronze_states_extra_data
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/2_silver/silver_states_extra_data
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: gold_annex_processing
          depends_on:
            - task_key: silver_customers
            - task_key: silver_orders
            - task_key: silver_items
            - task_key: silver_order_details
            - task_key: silver_addresslines_enrich
            - task_key: silver_states_extra_data
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/3_gold/gold_processing
            base_parameters:
              task: "{{task.name}}"
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: logging_process
          depends_on:
            - task_key: presentation_dashboard
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/0_utils/logging_process
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: gold_business_queries
          depends_on:
            - task_key: silver_customers
            - task_key: silver_orders
            - task_key: silver_items
            - task_key: silver_order_details
            - task_key: silver_addresslines_enrich
            - task_key: silver_states_extra_data
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/3_gold/gold_business_queries
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: presentation_dashboard
          depends_on:
            - task_key: gold_annex_processing
            - task_key: gold_business_queries
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/5_dashboards/business_dashboard
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
        - task_key: kpis
          depends_on:
            - task_key: presentation_dashboard
          notebook_task:
            notebook_path: /Workspace/Users/zhastay_yeltay@epam.com/seed_distributor_online_store/0_utils/kpis
            source: WORKSPACE
          existing_cluster_id: 0301-141254-das6sro
      tags:
        bronze: ""
        gold: ""
        silver: ""
      parameters:
        - name: job
          default: "{{job.name}}"
